import ast
import numpy as np

# 读取文件
with open('logs.txt', 'r') as file:
    data = file.read()

# 提取列表
# process_time_list = ast.literal_eval(data.split('process_time_list = ')[1].split(', car_number_list')[0])
# car_number_list = ast.literal_eval(data.split('car_number_list = ')[1].split(', person_number_list')[0])
# person_number_list = ast.literal_eval(data.split('person_number_list = ')[1].split(', Method')[0])
# times = ast.literal_eval(data.split('times = ')[1].split('}')[0] + '}')

objects_before_nms_list = [57, 61, 95, 100, 132, 113, 124, 171, 125, 133, 154, 138, 147, 139, 128, 128, 110, 80, 83, 65, 70, 42, 38, 37, 46, 34, 24, 26, 35, 31, 35, 43, 69, 76, 75, 85, 110, 88, 69, 89, 54, 53, 53, 38, 61, 34, 30, 40, 34, 34, 37, 27, 37, 31, 40, 36, 17, 2, 11, 4, 0, 1, 2, 20, 16, 14, 2, 11, 34, 55, 58, 74, 60, 65, 37, 28, 23, 25, 27, 30, 18, 5, 6, 2, 2, 4, 30, 19, 10, 22, 25, 71, 65, 70, 73, 56, 53, 40, 47, 53, 54, 15]
objects_after_nms_list = [4, 4, 8, 8, 10, 10, 11, 12, 11, 12, 10, 9, 11, 11, 8, 8, 8, 6, 7, 6, 5, 5, 4, 4, 6, 4, 4, 4, 4, 6, 5, 6, 7, 7, 7, 8, 10, 7, 9, 9, 5, 5, 6, 6, 6, 5, 4, 5, 4, 4, 4, 5, 4, 5, 6, 5, 3, 1, 4, 1, 0, 1, 1, 2, 3, 1, 1, 3, 4, 8, 6, 8, 5, 5, 5, 3, 3, 3, 3, 3, 2, 2, 2, 1, 1, 1, 3, 3, 2, 3, 5, 7, 6, 7, 5, 7, 6, 5, 5, 5, 6, 3]

# Method: single_attack
_objects_before_nms_list = [19814, 19824, 19978, 19967, 20097, 20060, 20084, 20009, 19760, 19623, 19891, 19368, 19791, 19890, 20891, 20856, 20018, 20261, 19242, 19249, 19959, 20282, 20289, 20577, 21231, 21254, 21248, 21221, 21735, 21702, 17378, 17540, 17736, 17306, 19422, 19482, 21141, 20600, 20453, 20480, 20642, 20754, 19668, 20084, 18865, 18742, 17977, 18182, 19280, 19879, 20004, 19671, 20063, 19916, 20942, 20940, 18976, 18864, 20702, 20276, 20342, 20602, 20697, 20855, 22287, 22280, 21965, 21594, 19148, 19022, 20023, 20036, 22532, 22550, 21401, 21528, 21887, 21767, 21688, 21907, 19765, 19758, 20626, 20383, 21465, 21484, 21123, 21010, 22083, 21984, 21264, 21277, 18171, 18225, 21789, 21819, 21702, 21712, 22223, 22213, 22523, 22597]
_objects_after_nms_list = [1503, 1515, 1667, 1673, 1572, 1582, 1478, 1506, 1483, 1475, 1359, 1314, 1422, 1454, 1594, 1595, 1588, 1595, 1282, 1290, 1370, 1403, 1459, 1492, 1492, 1467, 1544, 1552, 1659, 1700, 1139, 1161, 1104, 1087, 1277, 1250, 1534, 1495, 1403, 1400, 1474, 1479, 1606, 1614, 1225, 1230, 1170, 1165, 1353, 1400, 1430, 1406, 1405, 1376, 1556, 1576, 1219, 1220, 1283, 1266, 1458, 1473, 1378, 1401, 1609, 1588, 1643, 1656, 1250, 1234, 1286, 1292, 1551, 1555, 1479, 1499, 1640, 1607, 1538, 1536, 1242, 1234, 1278, 1269, 1537, 1538, 1491, 1482, 1496, 1474, 1584, 1581, 1213, 1198, 1361, 1344, 1486, 1514, 1521, 1506, 1659, 1660]


process_time_list = [11.949838399887085, 10.95487117767334, 13.778015613555908, 13.651686191558838, 12.784678220748901, 12.022545576095581, 12.079562664031982, 11.05344295501709, 11.580276250839233, 10.918301343917847, 9.343607664108276, 10.309158325195312, 10.938443422317505, 10.785980939865112, 11.803097248077393, 11.922512531280518, 11.896709203720093, 11.594755172729492, 9.63224744796753, 9.330775022506714, 9.582356691360474, 9.806436538696289, 10.624824523925781, 11.117591857910156, 11.236225605010986, 10.73456621170044, 10.961548566818237, 11.508837699890137, 12.085841655731201, 12.048251390457153, 8.850279331207275, 8.375827312469482, 8.920878887176514, 8.86070966720581, 10.087598085403442, 8.723379373550415, 11.684158325195312, 10.760151863098145, 9.543919086456299, 10.632385969161987, 11.088183164596558, 11.170594692230225, 13.128034830093384, 11.966701984405518, 9.939420938491821, 9.612831592559814, 8.656940698623657, 10.50242280960083, 9.297359228134155, 12.142341136932373, 10.810347318649292, 11.043728590011597, 11.209928750991821, 9.8535737991333, 12.750134706497192, 12.003817319869995, 9.03081750869751, 9.669834852218628, 10.162346839904785, 9.360880136489868, 9.834193229675293, 10.662529468536377, 10.530848979949951, 10.121594667434692, 12.598567485809326, 12.071974754333496, 12.286132097244263, 10.987042903900146, 9.426981449127197, 7.951958179473877, 9.23244023323059, 10.022836685180664, 12.795764207839966, 11.63292407989502, 10.90603256225586, 10.492005109786987, 12.858603715896606, 11.018521785736084, 11.765028953552246, 9.996092319488525, 9.433117628097534, 9.522178411483765, 9.681652784347534, 8.14201831817627, 9.979893445968628, 11.099104166030884, 10.627578735351562, 10.175373554229736, 10.682114124298096, 9.682610750198364, 11.864662170410156, 10.75201964378357, 9.16594672203064, 8.904879331588745, 9.883686065673828, 9.612694263458252, 11.239795446395874, 11.39827299118042, 11.138392686843872, 11.61077618598938, 12.081146478652954, 13.932106971740723]
car_number_list = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
person_number_list = [1502, 1513, 1667, 1673, 1571, 1582, 1478, 1506, 1482, 1473, 1358, 1314, 1421, 1452, 1593, 1592, 1588, 1593, 1281, 1290, 1369, 1403, 1459, 1492, 1491, 1466, 1544, 1548, 1659, 1700, 1137, 1159, 1104, 1085, 1277, 1249, 1533, 1495, 1403, 1399, 1474, 1479, 1602, 1611, 1223, 1228, 1168, 1165, 1351, 1400, 1430, 1405, 1404, 1374, 1555, 1576, 1219, 1219, 1283, 1266, 1458, 1472, 1377, 1400, 1609, 1588, 1642, 1655, 1247, 1231, 1286, 1292, 1551, 1555, 1479, 1499, 1639, 1607, 1536, 1535, 1242, 1234, 1277, 1267, 1536, 1537, 1491, 1482, 1496, 1474, 1579, 1576, 1213, 1198, 1361, 1344, 1485, 1512, 1520, 1505, 1659, 1660]

times = {'od': [2.259561538696289, 0.2284257411956787, 0.2430715560913086, 0.24291658401489258, 0.23500967025756836, 0.23595333099365234, 0.22548508644104004, 0.22857308387756348, 0.22550535202026367, 0.22736787796020508, 0.21340346336364746, 0.21664857864379883, 0.20541095733642578, 0.22414302825927734, 0.24410796165466309, 0.24037837982177734, 0.23613882064819336, 0.23530220985412598, 0.203291654586792, 0.20804500579833984, 0.19564175605773926, 0.2058110237121582, 0.2255101203918457, 0.23221158981323242, 0.2324676513671875, 0.23432683944702148, 0.24331140518188477, 0.24275541305541992, 0.25281572341918945, 0.25694823265075684, 0.18356585502624512, 0.18893718719482422, 0.17121601104736328, 0.165679931640625, 0.20902037620544434, 0.193709135055542, 0.2368481159210205, 0.23306655883789062, 0.22838616371154785, 0.22062134742736816, 0.2301023006439209, 0.21516847610473633, 0.2289750576019287, 0.22466278076171875, 0.20202112197875977, 0.1973586082458496, 0.17628073692321777, 0.1934051513671875, 0.21037554740905762, 0.21866583824157715, 0.22242164611816406, 0.21831512451171875, 0.2158966064453125, 0.20526528358459473, 0.23442435264587402, 0.2437758445739746, 0.2003161907196045, 0.19879603385925293, 0.21227574348449707, 0.21035003662109375, 0.22574520111083984, 0.22592782974243164, 0.22668671607971191, 0.22368216514587402, 0.24854087829589844, 0.24911904335021973, 0.24856162071228027, 0.2510073184967041, 0.2122347354888916, 0.19892454147338867, 0.21693754196166992, 0.20878148078918457, 0.2504098415374756, 0.23545169830322266, 0.22405314445495605, 0.203948974609375, 0.2400522232055664, 0.21330714225769043, 0.22949504852294922, 0.2265310287475586, 0.17204499244689941, 0.19418787956237793, 0.20203495025634766, 0.1741633415222168, 0.22842693328857422, 0.2242906093597412, 0.22452688217163086, 0.21757102012634277, 0.19924688339233398, 0.22502565383911133, 0.22873473167419434, 0.23424172401428223, 0.18213462829589844, 0.16195368766784668, 0.2160499095916748, 0.21077466011047363, 0.2233591079711914, 0.22727394104003906, 0.2274470329284668, 0.2279496192932129, 0.24430418014526367, 0.24594902992248535], 'lr': [2.268083095550537, 0.2365856170654297, 0.25552916526794434, 0.254335880279541, 0.2447652816772461, 0.24628424644470215, 0.2374258041381836, 0.2414383888244629, 0.23877477645874023, 0.23995041847229004, 0.22450828552246094, 0.22904729843139648, 0.21599507331848145, 0.23664116859436035, 0.2570216655731201, 0.25230884552001953, 0.24715733528137207, 0.24885296821594238, 0.21431612968444824, 0.21885085105895996, 0.2070779800415039, 0.21684575080871582, 0.23878026008605957, 0.24536871910095215, 0.24460244178771973, 0.24516749382019043, 0.2571990489959717, 0.2596275806427002, 0.2627842426300049, 0.2712881565093994, 0.19362092018127441, 0.20343589782714844, 0.1844327449798584, 0.17541956901550293, 0.22051405906677246, 0.20729565620422363, 0.25060558319091797, 0.24438929557800293, 0.2416081428527832, 0.23181772232055664, 0.24136638641357422, 0.22716212272644043, 0.24078822135925293, 0.23216819763183594, 0.2199709415435791, 0.2070920467376709, 2.35500431060791, 0.20808672904968262, 0.22294950485229492, 0.23111677169799805, 0.23164939880371094, 0.2289443016052246, 0.22530269622802734, 0.21699309349060059, 0.2467210292816162, 0.25513410568237305, 0.21211695671081543, 0.2131953239440918, 0.224273681640625, 0.22452926635742188, 0.23660850524902344, 0.24074912071228027, 0.6379833221435547, 0.2414257526397705, 0.2627277374267578, 0.26239585876464844, 0.26015377044677734, 0.2651662826538086, 0.22382855415344238, 0.21424651145935059, 0.22697949409484863, 0.22180461883544922, 0.26219892501831055, 0.2473747730255127, 0.2380061149597168, 0.21362543106079102, 0.251129150390625, 0.22255897521972656, 0.2392435073852539, 0.24125218391418457, 0.1795041561126709, 0.20665502548217773, 0.21072626113891602, 0.2454535961151123, 0.24354147911071777, 0.23790383338928223, 0.23525238037109375, 0.22762060165405273, 0.21064376831054688, 0.2372128963470459, 0.24109125137329102, 0.25008654594421387, 0.19491243362426758, 0.17201972007751465, 0.23016643524169922, 0.22427034378051758, 0.23643708229064941, 0.23883748054504395, 0.23816251754760742, 0.23784637451171875, 0.25488948822021484, 0.25722742080688477], 'pr': [11.942911624908447, 10.944782257080078, 13.77053189277649, 13.644320487976074, 12.773618459701538, 12.015448808670044, 12.069681644439697, 11.0463228225708, 11.573453903198242, 10.908789157867432, 9.335269212722778, 10.301056623458862, 10.929133653640747, 10.77866816520691, 11.793832063674927, 11.91560673713684, 11.888935327529907, 11.586258172988892, 9.62466835975647, 9.323451519012451, 9.575201511383057, 9.798792839050293, 10.617453813552856, 11.110507726669312, 11.229487657546997, 10.723144054412842, 10.953808307647705, 11.501604557037354, 12.078461408615112, 12.040717840194702, 8.841758966445923, 8.368364095687866, 8.912903070449829, 8.85358452796936, 10.080815315246582, 8.715808629989624, 11.669667482376099, 10.753285884857178, 9.536331176757812, 10.625057697296143, 11.081063985824585, 11.161710262298584, 13.117976665496826, 11.956870317459106, 9.93211579322815, 9.605085372924805, 8.649607181549072, 10.495803117752075, 9.29078459739685, 12.134905099868774, 10.803452253341675, 11.036315202713013, 11.203291177749634, 9.84666895866394, 12.742745876312256, 11.997071266174316, 9.023591756820679, 9.660568237304688, 10.155252695083618, 9.353779315948486, 9.827101945877075, 10.654941082000732, 10.523398160934448, 10.115278482437134, 12.59238338470459, 12.063953161239624, 12.279357433319092, 10.865656614303589, 9.419933319091797, 7.643393516540527, 9.225343942642212, 10.015410900115967, 12.78800344467163, 11.625461101531982, 10.898977041244507, 10.485049724578857, 12.851637363433838, 11.011017799377441, 11.754096984863281, 9.781536340713501, 9.262179851531982, 9.514777183532715, 9.674197912216187, 8.13479733467102, 9.973286390304565, 11.093065977096558, 10.374942779541016, 10.164137601852417, 10.67437195777893, 9.675810813903809, 11.850701332092285, 10.492163896560669, 9.1589035987854, 8.840447425842285, 9.876898050308228, 9.605184316635132, 11.232996225357056, 11.3905189037323, 11.131591320037842, 11.603373050689697, 12.073809623718262, 13.92333984375]}


# 转化 times
od_list = times['od']
lr_list = times['lr']
pr_list = times['pr']

# 删除前两个元素
objects_before_nms_list = objects_before_nms_list[2:]
objects_after_nms_list = objects_after_nms_list[2:]
_objects_before_nms_list = _objects_before_nms_list[2:]
_objects_after_nms_list = _objects_after_nms_list[2:]

process_time_list = process_time_list[2:]
car_number_list = car_number_list[2:]
person_number_list = person_number_list[2:]
od_list = od_list[2:]
lr_list = lr_list[2:]
pr_list = pr_list[2:]

# 调整 lr_list, pr_list
lr_list = [lr - od for lr, od in zip(lr_list, od_list)]
pr_list = [pr - od for pr, od in zip(pr_list, od_list)]

# # round(list, 4)
# objects_before_nms_list = [round(float(i), 4) for i in objects_before_nms_list]
# objects_after_nms_list = [round(float(i), 4) for i in objects_after_nms_list]
# _objects_before_nms_list = [round(float(i), 4) for i in _objects_before_nms_list]
# _objects_after_nms_list = [round(float(i), 4) for i in _objects_after_nms_list]
# process_time_list = [round(float(i), 4) for i in process_time_list]
# car_number_list = [round(float(i), 4) for i in car_number_list]
# person_number_list = [round(float(i), 4) for i in person_number_list]
# od_list = [round(float(i), 4) for i in od_list]
# lr_list = [round(float(i), 4) for i in lr_list]
# pr_list = [round(float(i), 4) for i in pr_list]


# 定义一个函数计算百分位和平均值
def calculate_statistics(lst):
    print(f"len(lst): {len(lst)}")
    percentiles = [np.min(lst), 
                   np.percentile(lst, 10), 
                   np.percentile(lst, 25), 
                   np.median(lst), 
                   np.percentile(lst, 75), 
                   np.percentile(lst, 90), 
                   np.max(lst), 
                   np.mean(lst)]
    return percentiles

# 计算并打印输出
print("objects_before_nms_list:", calculate_statistics(objects_before_nms_list))
print("objects_after_nms_list:", calculate_statistics(objects_after_nms_list))
print("_objects_before_nms_list:", calculate_statistics(_objects_before_nms_list))
print("_objects_after_nms_list:", calculate_statistics(_objects_after_nms_list))
print("process_time_list:", calculate_statistics(process_time_list))
print("car_number_list:", calculate_statistics(car_number_list))
print("person_number_list:", calculate_statistics(person_number_list))
print("od_list:", calculate_statistics(od_list))
print("lr_list:", calculate_statistics(lr_list))
print("pr_list:", calculate_statistics(pr_list))

